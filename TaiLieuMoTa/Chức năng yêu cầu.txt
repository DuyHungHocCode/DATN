QLDCQG_Project/
├── database/                     # (Giữ nguyên cấu trúc như trước)
│   └── ...
│
├── citizen_service_bca/          # Project FastAPI cho Service BCA (Simplified)
│   ├── app/
│   │   ├── __init__.py
│   │   ├── api/                  # API Layer
│   │   │   ├── __init__.py
│   │   │   ├── deps.py           # Dependency: get_db
│   │   │   └── v1/
│   │   │       ├── __init__.py
│   │   │       ├── api.py        # Main router
│   │   │       └── endpoints/
│   │   │           ├── __init__.py
│   │   │           ├── citizens.py # Các endpoint CRUD cơ bản
│   │   │           ├── internal.py # Endpoint validation cho BTP gọi
│   │   │           └── ... # Các file endpoint khác cho chức năng cốt lõi
│   │   ├── core/                 # Core config
│   │   │   ├── __init__.py
│   │   │   └── config.py         # Settings (DB_URL, KAFKA_BROKERS...)
│   │   ├── db/                   # Database Layer (SQLAlchemy)
│   │   │   ├── __init__.py
│   │   │   ├── base_class.py     # Base = declarative_base()
│   │   │   ├── database.py       # engine, SessionLocal
│   │   │   ├── models/           # SQLAlchemy Models
│   │   │   │   ├── __init__.py
│   │   │   │   ├── citizen.py
│   │   │   │   └── ... # Các model cần thiết
│   │   │   └── crud/             # CRUD Operations (có thể đơn giản hóa)
│   │   │       ├── __init__.py
│   │   │       └── crud_citizen.py # CRUD cơ bản
│   │   ├── schemas/              # Pydantic Schemas
│   │   │   ├── __init__.py
│   │   │   ├── citizen.py        # Schemas cơ bản
│   │   │   └── ... # Các schema cần thiết khác
│   │   ├── kafka/                # Kafka Integration
│   │   │   ├── __init__.py
│   │   │   ├── consumer.py       # Logic chạy Kafka consumer
│   │   │   └── event_handler.py  # Xử lý message nhận được
│   │   └── main.py               # FastAPI App instance, mount routers, startup consumer
│   ├── .env                      # Biến môi trường
│   ├── Dockerfile                # Build image
│   ├── requirements.txt
│   └── README.md
│
├── civil_status_service_btp/     # Project FastAPI cho Service BTP (Simplified)
│   ├── app/
│   │   ├── __init__.py
│   │   ├── api/                  # API Layer
│   │   │   ├── __init__.py
│   │   │   ├── deps.py
│   │   │   └── v1/
│   │   │       ├── __init__.py
│   │   │       ├── api.py
│   │   │       └── endpoints/
│   │   │           ├── __init__.py
│   │   │           ├── birth_certificates.py # CRUD cơ bản
│   │   │           ├── death_certificates.py # CRUD + Gửi Kafka
│   │   │           └── ... # Các endpoint cốt lõi khác
│   │   ├── core/
│   │   │   ├── __init__.py
│   │   │   └── config.py
│   │   ├── db/                   # Database Layer (SQLAlchemy)
│   │   │   ├── __init__.py
│   │   │   ├── base_class.py
│   │   │   ├── database.py
│   │   │   ├── models/
│   │   │   │   ├── __init__.py
│   │   │   │   ├── birth_certificate.py
│   │   │   │   └── ...
│   │   │   └── crud/
│   │   │       ├── __init__.py
│   │   │       └── crud_birth_certificate.py
│   │   ├── schemas/              # Pydantic Schemas
│   │   │   ├── __init__.py
│   │   │   ├── birth_certificate.py
│   │   │   ├── event.py          # Kafka event schema
│   │   │   └── ...
│   │   ├── clients/              # HTTP Client for BCA
│   │   │   ├── __init__.py
│   │   │   └── citizen_service_client.py # Gọi API validation của BCA
│   │   ├── kafka/                # Kafka Integration
│   │   │   ├── __init__.py
│   │   │   └── producer.py       # Logic gửi message lên Kafka
│   │   └── main.py               # FastAPI App instance, mount routers
│   ├── .env
│   ├── Dockerfile
│   ├── requirements.txt
│   └── README.md
│
├── api_gateway/                  # API Gateway config (e.g., Nginx)
│   └── nginx/
│       └── default.conf
│
├── kafka/                        # Kafka Docker Compose
│   └── docker-compose.kafka.yml
│
├── docker-compose.yml            # Main Docker Compose (services, gateway)
├── .gitignore
└── README.md                     # Main project README
