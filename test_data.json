[
  {
    "test_name": "add-member: Success - Add Son to Household",
    "endpoint": "/households/add-member",
    "method": "POST",
    "payload": {
      "citizen_id": "001201786523",
      "to_household_id": 1,
      "relationship_with_head_id": 4,
      "effective_date": "2024-05-20",
      "reason_code": "NHAP_HO_CHUYEN_DEN",
      "issuing_authority_id": 401,
      "created_by_user_id": "api_test_user",
      "notes": "Test case: Add Trần Đình Quang (son) to household 1 (Nguyễn Văn Minh as head)."
    },
    "expected_status": 201,
    "expected_response_contains": "Đã thêm công dân 001201786523 vào hộ khẩu 1 thành công."
  },
  {
    "test_name": "add-member: Success with Warning - Genealogical Mismatch",
    "endpoint": "/households/add-member",
    "method": "POST",
    "payload": {
      "citizen_id": "001196325874",
      "to_household_id": 1,
      "relationship_with_head_id": 4,
      "effective_date": "2024-05-20",
      "reason_code": "NHAP_HO_CHUYEN_DEN",
      "issuing_authority_id": 401,
      "created_by_user_id": "api_test_user",
      "notes": "Test case: Add Phạm Thị Thảo as 'Con' to household 1. Should succeed with a warning because she is not registered as Nguyễn Văn Minh's daughter."
    },
    "expected_status": 201,
    "expected_response_contains": "Cảnh báo: Mối quan hệ \"Con\" không khớp với dữ liệu hộ tịch"
  },
  {
    "test_name": "add-member: Fail (409) - Duplicate Wife",
    "endpoint": "/households/add-member",
    "method": "POST",
    "payload": {
      "citizen_id": "001196325874",
      "to_household_id": 1,
      "relationship_with_head_id": 2,
      "effective_date": "2024-05-20",
      "reason_code": "NHAP_HO_CHUYEN_DEN",
      "issuing_authority_id": 401,
      "created_by_user_id": "api_test_user",
      "notes": "Test case: Attempt to add a second 'Vợ' to household 1, which already has one."
    },
    "expected_status": 409,
    "expected_response_contains": "Hộ khẩu đã có vợ/chồng của chủ hộ."
  },
  {
    "test_name": "add-member: Fail (400) - Invalid Relationship ID",
    "endpoint": "/households/add-member",
    "method": "POST",
    "payload": {
      "citizen_id": "001198752461",
      "to_household_id": 2,
      "relationship_with_head_id": 999,
      "effective_date": "2024-05-20",
      "reason_code": "NHAP_HO_CHUYEN_DEN",
      "issuing_authority_id": 401,
      "created_by_user_id": "api_test_user",
      "notes": "Test case: Use a relationship_with_head_id that does not exist."
    },
    "expected_status": 400,
    "expected_response_contains": "Mã quan hệ với chủ hộ không hợp lệ."
  },
  {
    "test_name": "add-member: Fail (400) - Citizen is Deceased",
    "endpoint": "/households/add-member",
    "method": "POST",
    "payload": {
      "citizen_id": "001067218934",
      "to_household_id": 2,
      "relationship_with_head_id": 7,
      "effective_date": "2024-05-20",
      "reason_code": "NHAP_HO_CHUYEN_DEN",
      "issuing_authority_id": 401,
      "created_by_user_id": "api_test_user",
      "notes": "Test case: Attempt to add Lê Thị Hiền, who is deceased."
    },
    "expected_status": 400,
    "expected_response_contains": "không hợp lệ hoặc đã qua đời."
  },
  {
    "test_name": "add-member: Fail (409) - Citizen Already in a Household",
    "endpoint": "/households/add-member",
    "method": "POST",
    "payload": {
      "citizen_id": "001091345612",
      "to_household_id": 2,
      "relationship_with_head_id": 13,
      "effective_date": "2024-05-20",
      "reason_code": "NHAP_HO_CHUYEN_DEN",
      "issuing_authority_id": 401,
      "created_by_user_id": "api_test_user",
      "notes": "Test case: Attempt to add Nguyễn Thị Hương, who is already in household 1."
    },
    "expected_status": 409,
    "expected_response_contains": "đã là thành viên của một hộ khẩu khác."
  },
  {
    "test_name": "transfer-member: Success",
    "endpoint": "/households/transfer-member",
    "method": "POST",
    "payload": {
      "citizen_id": "001299876543",
      "from_household_id": 1,
      "to_household_id": 2,
      "relationship_with_head_id": 13,
      "effective_date": "2024-05-21",
      "reason_code": "CHUYEN_HO_KHAU",
      "issuing_authority_id": 401,
      "created_by_user_id": "api_test_user",
      "notes": "Test case: Transfer Nguyễn Đức Anh from household 1 to household 2 with relationship 'Cháu'."
    },
    "expected_status": 201,
    "expected_response_contains": "Đã chuyển công dân 001299876543 từ hộ khẩu 1 sang hộ khẩu 2 thành công."
  },
  {
    "test_name": "transfer-member: Fail (400) - Cannot Transfer Head of Household",
    "endpoint": "/households/transfer-member",
    "method": "POST",
    "payload": {
      "citizen_id": "001089123456",
      "from_household_id": 1,
      "to_household_id": 3,
      "relationship_with_head_id": 14,
      "effective_date": "2024-05-21",
      "reason_code": "CHUYEN_HO_KHAU",
      "issuing_authority_id": 401,
      "created_by_user_id": "api_test_user",
      "notes": "Test case: Attempt to transfer Nguyễn Văn Minh, who is the head of household 1."
    },
    "expected_status": 400,
    "expected_response_contains": "Không thể chuyển chủ hộ."
  }
] 